(()=>{"use strict";const e=(()=>{const e=document.querySelector(".city"),t=document.querySelector(".country"),r=document.querySelector(".temperature-value"),c=document.querySelector(".temperature-unit"),n=document.querySelector(".icon"),o=document.querySelector(".weather-description");return{searchErrorEl:document.querySelector(".error-msg"),cityEl:e,countryEl:t,tempValueEl:r,tempUnitEl:c,weatherIconEl:n,weatherDescriptionEl:o}})(),t="weather.info",r=JSON.parse(localStorage.getItem(t))||{},c=c=>{(async function(e){try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&appid=a3a3c872c3aed550e72581047c492050`);return await t.json()}catch(e){return e.message}})(c).then((c=>{c.sys?(r.cod=c.cod,r.city=c.name,r.country=c.sys.country,r.temp=c.main.temp,r.description=c.weather[0].description,r.icon=`http://openweathermap.org/img/wn/${c.weather[0].icon}.png`,localStorage.setItem(t,JSON.stringify(r)),e.cityEl.textContent=r.city,e.countryEl.textContent=r.country,e.tempValueEl.textContent=`${r.temp}°C`,e.weatherDescriptionEl.textContent=r.description,e.weatherIconEl.src=r.icon,e.searchErrorEl.textContent=""):e.searchErrorEl.textContent=c.message}))};c("Tema");const n=document.getElementById("locationForm");n.addEventListener("submit",(e=>{e.preventDefault();const t=n.querySelector(".form-control.city-input").value;c(t),n.reset()}));const o=document.querySelector(".unit-toggler");o.addEventListener("click",(t=>{o.querySelectorAll(".switch-active").forEach((e=>{e.classList.remove("switch-active")})),t.target.classList.add("switch-active"),(t=>{if("fahrenheit"===t){const t=(9*parseFloat(r.temp)/5+32).toFixed(2);e.tempValueEl.innerHTML=`${t}°F`}else e.tempValueEl.textContent=`${r.temp}°C`})(t.target.dataset.switch)}))})();